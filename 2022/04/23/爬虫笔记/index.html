<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="爬虫笔记（爬虫学的好，牢饭吃的早)1、准备工作用途   python库 情况说明    请求模块 用于模拟用户请求网页获取数据   requests 模拟用户请求   selenium 模拟用户打开浏览器获取数据   chromeDriver selenium的chrome驱动   GeckoDriver selenium的firfox驱动   phantomJs selenium的无界面驱动">
<meta property="og:type" content="article">
<meta property="og:title" content="爬虫笔记">
<meta property="og:url" content="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="解忧杂货铺">
<meta property="og:description" content="爬虫笔记（爬虫学的好，牢饭吃的早)1、准备工作用途   python库 情况说明    请求模块 用于模拟用户请求网页获取数据   requests 模拟用户请求   selenium 模拟用户打开浏览器获取数据   chromeDriver selenium的chrome驱动   GeckoDriver selenium的firfox驱动   phantomJs selenium的无界面驱动">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记/爬虫图片/20200925222905.png">
<meta property="og:image" content="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记/爬虫图片/20200925222906.png">
<meta property="og:image" content="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记/爬虫图片/20200925222907.png">
<meta property="og:image" content="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记/爬虫图片/20200925222908.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TheFoxFairy/notebook-picgo@master/img/20200925222909.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TheFoxFairy/notebook-picgo@master/img/20200925222910.gif">
<meta property="article:published_time" content="2022-04-23T02:47:41.000Z">
<meta property="article:modified_time" content="2022-04-23T03:30:14.602Z">
<meta property="article:author" content="袁叔叔">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记/爬虫图片/20200925222905.png">


<link rel="canonical" href="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/","path":"2022/04/23/爬虫笔记/","title":"爬虫笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>爬虫笔记 | 解忧杂货铺</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">解忧杂货铺</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">穷且志坚，不坠青云之志。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/home/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0%EF%BC%88%E7%88%AC%E8%99%AB%E5%AD%A6%E7%9A%84%E5%A5%BD%EF%BC%8C%E7%89%A2%E9%A5%AD%E5%90%83%E7%9A%84%E6%97%A9"><span class="nav-number">1.</span> <span class="nav-text">爬虫笔记（爬虫学的好，牢饭吃的早)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.1.</span> <span class="nav-text">1、准备工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E9%80%94"><span class="nav-number">1.2.</span> <span class="nav-text">用途</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E6%A6%82%E5%BF%B5"><span class="nav-number">1.3.</span> <span class="nav-text">2、概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="nav-number">1.3.1.</span> <span class="nav-text">HTTP基本原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E5%9F%BA%E7%A1%80"><span class="nav-number">1.3.2.</span> <span class="nav-text">网页基础</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81%E7%88%AC%E8%99%AB%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="nav-number">1.4.</span> <span class="nav-text">3、爬虫的基本原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E8%AF%AF%E5%8C%BA"><span class="nav-number">1.4.0.0.1.</span> <span class="nav-text">常见误区</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%90%86"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">代理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.4.0.1.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="nav-number">1.4.0.1.2.</span> <span class="nav-text">基本原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E7%94%A8%E9%80%94"><span class="nav-number">1.4.0.1.3.</span> <span class="nav-text">代理的用途</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%88%AC%E8%99%AB%E4%BB%A3%E7%90%86"><span class="nav-number">1.4.0.1.4.</span> <span class="nav-text">爬虫代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="nav-number">1.4.0.1.5.</span> <span class="nav-text">代理的类别</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%B1%BB%E5%88%AB"><span class="nav-number">1.4.0.1.5.1.</span> <span class="nav-text">类别</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E5%8C%BF%E5%90%8D%E7%A8%8B%E5%BA%A6%E5%8C%BA%E5%88%86"><span class="nav-number">1.4.0.1.5.2.</span> <span class="nav-text">根据匿名程度区分</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span class="nav-number">1.4.0.1.6.</span> <span class="nav-text">常见的代理设置</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">袁叔叔</p>
  <div class="site-description" itemprop="description">记录点滴生活</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="袁叔叔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="解忧杂货铺">
      <meta itemprop="description" content="记录点滴生活">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="爬虫笔记 | 解忧杂货铺">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          爬虫笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-04-23 10:47:41 / Modified: 11:30:14" itemprop="dateCreated datePublished" datetime="2022-04-23T10:47:41+08:00">2022-04-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">爬虫笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="爬虫笔记（爬虫学的好，牢饭吃的早"><a href="#爬虫笔记（爬虫学的好，牢饭吃的早" class="headerlink" title="爬虫笔记（爬虫学的好，牢饭吃的早)"></a>爬虫笔记（爬虫学的好，牢饭吃的早)</h1><h2 id="1、准备工作"><a href="#1、准备工作" class="headerlink" title="1、准备工作"></a>1、准备工作</h2><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><table>
<thead>
<tr>
<th align="left">python库</th>
<th>情况说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em><strong>请求模块</strong></em></td>
<td><em><strong>用于模拟用户请求网页获取数据</strong></em></td>
</tr>
<tr>
<td align="left">requests</td>
<td>模拟用户请求</td>
</tr>
<tr>
<td align="left">selenium</td>
<td>模拟用户打开浏览器获取数据</td>
</tr>
<tr>
<td align="left">chromeDriver</td>
<td>selenium的chrome驱动</td>
</tr>
<tr>
<td align="left">GeckoDriver</td>
<td>selenium的firfox驱动</td>
</tr>
<tr>
<td align="left">phantomJs</td>
<td>selenium的无界面驱动</td>
</tr>
<tr>
<td align="left"><em><strong>解析模块</strong></em></td>
<td><em><strong>用于解析网页数据</strong></em></td>
</tr>
<tr>
<td align="left">Beautiful Soup</td>
<td>requests 库已经可以抓到网页源码，接下来要从源码中找到并提取数据。Beautiful Soup 是 python 的一个库，其最主要的功能是从网页中抓取数据</td>
</tr>
<tr>
<td align="left">pyquery</td>
<td><a target="_blank" rel="noopener" href="http://pyquery.readthedocs.io/%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E4%B8%BB%E8%A6%81%E7%94%A8%E6%9D%A5%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E6%95%B0%E6%8D%AE%E7%9A%84">http://pyquery.readthedocs.io/官方文档主要用来获取网页数据的</a></td>
</tr>
<tr>
<td align="left"><em><strong>图片识别工具</strong></em></td>
<td></td>
</tr>
<tr>
<td align="left">tesserocr</td>
<td>用于解析图片验证码</td>
</tr>
<tr>
<td align="left"><em><strong>数据库</strong></em></td>
<td>将爬取的数据保存到数据库中</td>
</tr>
<tr>
<td align="left">MySQL</td>
<td></td>
</tr>
<tr>
<td align="left"><em><strong>缓存数据</strong></em></td>
<td></td>
</tr>
<tr>
<td align="left">memecached</td>
<td></td>
</tr>
<tr>
<td align="left"><em><strong>存储模块</strong></em></td>
<td>连接数据库的python库</td>
</tr>
<tr>
<td align="left">PyMySQL</td>
<td>用于连接mysql</td>
</tr>
<tr>
<td align="left">redis-py</td>
<td>用于连接redis</td>
</tr>
<tr>
<td align="left">RedisDump</td>
<td>图形化redis工具</td>
</tr>
<tr>
<td align="left"><em><strong>抓包工具\模拟请求工具</strong></em></td>
<td>用于抓取app以及网页数据</td>
</tr>
<tr>
<td align="left">Charles</td>
<td></td>
</tr>
<tr>
<td align="left">Wireshark</td>
<td></td>
</tr>
<tr>
<td align="left">mitmproxy</td>
<td></td>
</tr>
<tr>
<td align="left">Appinum</td>
<td></td>
</tr>
<tr>
<td align="left">fillder</td>
<td></td>
</tr>
<tr>
<td align="left">postman</td>
<td>用于模拟请求</td>
</tr>
<tr>
<td align="left"><em><strong>爬虫框架</strong></em></td>
<td></td>
</tr>
<tr>
<td align="left">pypspider</td>
<td></td>
</tr>
<tr>
<td align="left">Scrapy</td>
<td></td>
</tr>
<tr>
<td align="left">Scrapy-Splash</td>
<td></td>
</tr>
<tr>
<td align="left">ScrapyRedis</td>
<td></td>
</tr>
<tr>
<td align="left"><em><strong>部署模块</strong></em></td>
<td></td>
</tr>
<tr>
<td align="left">Docker</td>
<td></td>
</tr>
<tr>
<td align="left">Scrapyed</td>
<td></td>
</tr>
<tr>
<td align="left">ScrapyClient</td>
<td></td>
</tr>
<tr>
<td align="left">ScrapyAPI</td>
<td></td>
</tr>
<tr>
<td align="left">Scrapyrt</td>
<td></td>
</tr>
<tr>
<td align="left">Gerapy</td>
<td></td>
</tr>
<tr>
<td align="left"></td>
<td></td>
</tr>
</tbody></table>
<hr>
<hr>
<h2 id="2、概念"><a href="#2、概念" class="headerlink" title="2、概念"></a>2、概念</h2><h3 id="HTTP基本原理"><a href="#HTTP基本原理" class="headerlink" title="HTTP基本原理"></a>HTTP基本原理</h3><p><em><strong>URI和URL</strong></em></p>
<p>URI可被是为定位符，名称（URN)或两者兼备。统一资源标识符（URI）用于标识某一互联网资源，而统一资源定位符（URL）表示资源的地点（互联网所处的位置)所以URL是URI的子集</p>
<p><img src="/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记\爬虫图片\20200925222905.png"></p>
<p><em><strong>超文本</strong></em></p>
<p>网页的源代码便可称为超文本</p>
<p><em><strong>HTTP和HTTPS</strong></em></p>
<p>HTTPS是HTTP的安全版，即HTTP下加入SSL层,所以在GitHub上表示都要HTTPS。</p>
<p>HTTPS 的安全基础是 SSL，因此通过它传输的内容都是经过 SSL 加密的，它的主要作用可以分为两种：</p>
<ul>
<li>是建立一个信息安全通道，来保证数据传输的安全。</li>
<li>确认网站的真实性，凡是使用了 https 的网站，都可以通过点击浏览器地址栏的锁头标志来查看网站认证之后的真实信息，也可以通过 CA 机构颁发的安全签章来查询。</li>
</ul>
<p>​      而某些网站虽然使用了 HTTPS 协议还是会被浏览器提示不安全，所以这里证书验证就不会通过而提示这样的话，但是实际上它的数据传输依然是经过 SSL 加密的。如果要爬取这样的站点就需要<em><strong>设置忽略证书的选项，否则会提示 SSL 链接错误</strong></em>。</p>
<p><em><strong>HTTP的请求过程</strong></em></p>
<p>当在浏览器输入一个url，回车后，便可看到该网页的内容，实际上过程是浏览器向该网站的服务器发送一个Request(请求)，网站的服务器接收之后，然后返回与之对应的一个Response(响应)，然后返回给浏览器，response响应中包含了页面的源代码等内容，浏览器解析会后便将网页给呈现出来。</p>
<p><img src="/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记\爬虫图片\20200925222906.png"></p>
<p><img src="/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记\爬虫图片\20200925222907.png"></p>
<p>按下F12，然后点击network面板，便可看到一次发送请求和接收响应之间的过程。</p>
<p>一个条目的名称及含义：</p>
<p><code>Name</code>，即 Request 的名称。</p>
<p><code>Status</code>，即 Response 的状态码。通过状态码可以判断发送了 Request 之后是否得到了正常的 Response。</p>
<p><code>Type</code>，即 Request 请求的文档类型。</p>
<p><code>Initiator</code>，即请求源。</p>
<p><code>Size</code>，即从服务器下载的文件和请求的资源大小。</p>
<p><code>Time</code>，即发起 Request 到获取到 Response 所用的总时间。</p>
<p><code>Timeline</code>，即网络请求的可视化瀑布流。</p>
<p><em><strong>点击某条目可以看到更详细的信息</strong></em></p>
<p><img src="/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0/笔记\爬虫图片\20200925222908.png"></p>
<p><code>General</code>部分中属性的含义:</p>
<ul>
<li><p>Request URL 为Request的URL</p>
</li>
<li><p>Request Method为请求的方法</p>
</li>
<li><p>Status Code为响应状态码</p>
</li>
<li><p>Remote Address为远程服务器的地址和端口</p>
</li>
<li><p>Referrer Policy 为Referrer判别策略</p>
<p>Response Headers 和一个 Request Headers，这分别代表响应头和请求头，请求头里面带有许多请求信息，例如浏览器标识、Cookies、Host 等信息，这是 Request 的一部分，服务器会根据请求头内的信息判断请求是否合法，进而作出对应的响应，返回 Response，那么在图中看到的 Response Headers 就是 Response 的一部分，例如其中包含了服务器的类型、文档类型、日期等信息，浏览器接受到 Response 后，会解析响应内容，进而呈现网页内容。</p>
</li>
</ul>
<p><strong>Request</strong></p>
<p>Request，即请求，由客户端向服务端发出。</p>
<p>Request 有四部分内容</p>
<ul>
<li>Request Method(请求方式)</li>
<li>Request URL(请求链接)</li>
<li>Request Headers(请求头)</li>
<li>Request Body(请求体)</li>
</ul>
<ol>
<li><strong>Request Method</strong></li>
</ol>
<p>请求方式中有两种常见的类型:GET和POST</p>
<p>*GET:*从指定的资源请求数据。比如在谷歌中直接搜索花，这便发起了一个get请求，请求的参数会直接包含到url中，如:<a target="_blank" rel="noopener" href="https://www.google.com.hk/search?q=%E8%8A%B1&amp;oq=%E8%8A%B1&amp;aqs=chrome..69i57j69i60l4.5466j0j7&amp;sourceid=chrome&amp;ie=UTF-8%EF%BC%8Curl%E4%B8%AD%E5%8C%85%E5%90%AB%E4%BA%86%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8F%82%E6%95%B0%E4%BF%A1%E6%81%AF%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9A%84%E5%8F%82%E6%95%B0q%E5%B0%B1%E6%98%AF%E6%90%9C%E7%B4%A2%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97">https://www.google.com.hk/search?q=花&amp;oq=花&amp;aqs=chrome..69i57j69i60l4.5466j0j7&amp;sourceid=chrome&amp;ie=UTF-8，url中包含了请求的参数信息，这里的参数q就是搜索的关键字</a></p>
<p>*POST:*向指定的资源提交要被处理的数据。POST 请求大多为表单提交发起，如一个登录表单，输入用户名密码，点击登录按钮，这通常会发起一个 POST 请求，其数据通常以 Form Data 即表单的形式传输，不会体现在 URL 中。</p>
<p>GET 和 POST 请求方法有如下区别：</p>
<ul>
<li>GET 方式请求中参数是包含在 URL 里面的，数据可以在 URL 中看到，而 POST 请求的 URL 不会包含这些数据，数据都是通过表单的形式传输，会包含在 Request Body 中。</li>
<li>GET 方式请求提交的数据最多只有 1024 字节，而 POST 方式没有限制。</li>
</ul>
<p><strong>Response Headers</strong></p>
<p>响应头，其中包含了服务器对请求的应答信息，如 Content-Type、Server、Set-Cookie 等，下面将一些常用的头信息说明如下：</p>
<ul>
<li><p>Date，标识 Response 产生的时间。</p>
</li>
<li><p>Last-Modified，指定资源的最后修改时间。</p>
</li>
<li><p>Content-Encoding，指定 Response 内容的编码。</p>
</li>
<li><p>Server，包含了服务器的信息，名称，版本号等。</p>
</li>
<li><p>Content-Type，文档类型，指定了返回的数据类型是什么，如text&#x2F;html 则代表返回 HTML 文档，application&#x2F;x-javascript 则代表返回 JavaScript 文件，image&#x2F;jpeg 则代表返回了图片。</p>
</li>
<li><p>Set-Cookie，设置Cookie，Response Headers 中的 Set-Cookie即告诉浏览器需要将此内容放在 Cookies 中，下次请求携带 Cookies 请求。</p>
</li>
<li><p>Expires，指定 Response 的过期时间，使用它可以控制代理服务器或浏览器将内容更新到缓存中，如果再次访问时，直接从缓存中加载，降低服务器负载，缩短加载时间。</p>
</li>
</ul>
<p><strong>Resposne Body</strong></p>
<p>即响应体，最重要的当属响应体内容了，响应的正文数据都是在响应体中，如请求一个网页，它的响应体就是网页的 HTML 代码，请求一张图片，它的响应体就是图片的二进制数据。所以最主要的数据都包含在响应体中了，做爬虫请求网页后要解析的内容就是解析响应体</p>
<p><img src="https://cdn.jsdelivr.net/gh/TheFoxFairy/notebook-picgo@master/img/20200925222909.png" alt="img"></p>
<p>在浏览器开发者工具中点击 Preview，就可以看到网页的源代码，这也就是响应体内容，是解析的目标。</p>
<p>在做爬虫时主要解析的内容就是 Resposne Body，通过 Resposne Body 可以得到网页的源代码、Json 数据等等，然后从中做相应内容的提取。</p>
<h3 id="网页基础"><a href="#网页基础" class="headerlink" title="网页基础"></a>网页基础</h3><p>HTML DOM 节点树</p>
<p>HTML DOM 将 HTML 文档视作树结构。这种结构被称为<em>节点树</em>：</p>
<p><strong>HTML DOM Tree 实例</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/TheFoxFairy/notebook-picgo@master/img/20200925222910.gif" alt="img"></p>
<center>HTML DOM Node Tree</center>

<h2 id="3、爬虫的基本原理"><a href="#3、爬虫的基本原理" class="headerlink" title="3、爬虫的基本原理"></a>3、爬虫的基本原理</h2><p>什么是爬虫？</p>
<p>爬虫，即使将网的节点比作一个个网页，爬虫爬到这就相当于访问了该页面获取了其信息，节点间的连线可以比作网页与网页之间的链接关系，这样蜘蛛通过一个个节点后可以顺着节点连线继续爬行到达下一个节点，即通过一个网页继续获取后续的网页，这样整个网页的节点便可被蜘蛛全部爬行到，这样的数据就可以被抓取下来。</p>
<p>爬虫操作步骤</p>
<p>爬虫就是获取网页并提取和保存信息的自动化程序的操作步骤：</p>
<ul>
<li><p>获取网页</p>
<p>爬虫首先要做的工作就是获取网页，在这里获取网页即获取网页的源代码，源代码里面必然包含网页部分有用的信息，所以只要把源代码获取下来，就可以从中提取想要的信息了。</p>
</li>
<li><p>提取信息</p>
<p>在第一步获取了网页源代码之后，接下来的工作就是分析网页源代码，从中提取想要的信息。</p>
</li>
<li><p>保存数据</p>
<p>提取信息之后一般将提取到的数据保存到某处以便后续数据处理使用。保存形式可以简单保存为TXT文本或json文本，也可以保存到数据库，如MySql、等也可以保存到远程服务器。</p>
</li>
<li><p>能抓怎样的数据</p>
<ul>
<li>在网页中能看到各种各样的信息，最常见的便是常规网页，其都对应着HTML代码，&#x3D;&#x3D;而最常见的抓取HTML源代码&#x3D;&#x3D;。</li>
<li>另外可能有些网页返回的不是HTML代码，而是返回一个&#x3D;&#x3D;JSON字符串，API接口大多采用这样的形式&#x3D;&#x3D;，方便数据的传输和解析，这种数据同样可以抓取，而且数据提取更方便。</li>
<li>此外还可以看到各种二进制数据，如图片、视频、音频等，可以利用爬虫将他们&#x3D;&#x3D;二进制数据&#x3D;&#x3D;抓取下来然后保存对应的文件名即可</li>
<li>另外还可以看到各种扩展名的文件，如 CSS、JavaScript、配置文件等等，这些其实也是最普通的文件，只要在浏览器里面访问到，就可以将其抓取下来。</li>
</ul>
<p>以上的内容其实都对应着各自的URL，是基于 HTTP 或 HTTPS 协议的，只要是这种数据爬虫都可以进行抓取。</p>
</li>
</ul>
<p><strong>自动化程序</strong></p>
<p>所谓自动化城西就是代替人工爬虫，当数据量特别大或者想快速获取大量数据的化，肯定还是借助于程序。所以爬虫就是代替来完成这份爬取数据的工作的自动化程序，还可以在抓取的过程中进行各种异常处理、错误重试等操作，确保爬取持续高效地进行。</p>
<p><strong>JavaScript渲染的页面</strong></p>
<p>有时候在用Urllib或者Requests抓取网页时,得到的源代码实际和浏览器中的不一样。因为现在网页越来越多地采用Ajax、前端模块化工具来构建网页，整个网页可能都是由JavaScript渲染出来的，&#x3D;&#x3D;原始的HTML代码就是一个空壳&#x3D;&#x3D;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>This is a Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>body 节点里面只有一个<div id="container">节点，但是注意到在body节点后引入一个app.js，这个便负责了整个网站的渲染。</div></p>
<p>在浏览器打开这个页面时，首先会加载这个 HTML 内容，接着浏览器会发现其中里面引入了一个 app.js 文件，然后浏览器便会接着去请求这个文件，获取到该文件之后便会执行其中的 JavaScript 代码，而 JavaScript 则会改变 HTML 中的节点，向内添加内容，最后得到完整的页面。</p>
<p>但是在用 Urllib 或 Requests 等库来请求当前页面时，得到的只是这个 HTML 代码，它不会帮助去继续加载这个 JavaScript 文件，这样也就看不到浏览器中看到的内容了。</p>
<p>这也解释了为什么有时得到的源代码和浏览器中看到的是不一样的。</p>
<p>所以使用基本 HTTP 请求库得到的结果源代码可能跟浏览器中的页面源代码不太一样。对于这样的情况，可以分析其后台&#x3D;&#x3D;Ajax 接口，也可使用 Selenium、Splash 这样的库来实现模拟 JavaScript 渲染，这样便可以爬取 JavaScript 渲染的网页的内容了&#x3D;&#x3D;。</p>
<p><strong>会话与cookies</strong></p>
<p>cookies属性：</p>
<ul>
<li>Name，即该Cookie的名称。</li>
<li>Value，即该Cookie的值。如果值为Unicode字符，需要为字符编码。如果职位二进制数据，则需要使用BASE64编码</li>
<li>MAX Age即 该cookie失效的时间，单位秒，也常和Expires一起使用，通过它可以计算出其有效的时间。MAX age如果为正数，则该cookie在max age秒之后失效，如果为负数，则关闭浏览器时cookie失效，浏览器不会保存任何形式的Cookie</li>
<li>path即cookie的使用路径，如果设置为&#x2F;path&#x2F;，则只有路径为&#x2F;path&#x2F;的页面可以访问该cookie，如果设置为&#x2F;，则本域名下的所有页面都可以访问该cookie</li>
<li>domain，可以访问cookie的域名，例如zhihu.com,则所有zhihu.com结尾的域名都可以访问cookie</li>
<li>size字段，即Cookie的大小</li>
</ul>
<h5 id="常见误区"><a href="#常见误区" class="headerlink" title="常见误区"></a>常见误区</h5><p>在谈论 Session 机制的时候，常常听到这样一种误解“只要关闭浏览器，Session 就消失了”，这种理解是错误的，可以想象一下会员卡的例子，除非顾客主动对店家提出销卡，否则店家绝对不会轻易删除顾客的资料。对 Session 来说也是一样的，除非程序通知服务器删除一个 Session，否则服务器会一直保留，比如程序一般都是在做注销操作的时候才去删除 Session。</p>
<p>但是当关闭浏览器时，浏览器不会主动在关闭之前通知服务器它将要关闭，所以服务器根本不会有机会知道浏览器已经关闭，之所以会有这种错觉，是大部分 Session 机制都使用会话 Cookie 来保存 Session ID 信息，而关闭浏览器后 Cookies 就消失了，再次连接服务器时也就无法找到原来的 Session。如果服务器设置的 Cookies 被保存到硬盘上，或者使用某种手段改写浏览器发出的 HTTP 请求头，把原来的 Cookies 发送给服务器，则再次打开浏览器仍然能够找到原来的 Session ID，依旧还是可以保持登录状态的。</p>
<p>而且恰恰是由于关闭浏览器不会导致 Session 被删除，这就需要服务器为 Seesion 设置一个失效时间，当距离客户端上一次使用 Session 的时间超过这个失效时间时，服务器就可以认为客户端已经停止了活动，才会把 Session 删除以节省存储空间。</p>
<h4 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h4><h5 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h5><p>在做爬虫的过程中经常会遇到这样的情况，最初爬虫正常运行，正常抓取数据，一切看起来都是那么的美好，然而一杯茶的功夫可能就会出现错误，比如 403 Forbidden，这时候打开网页一看，可能会看到“IP 访问频率太高”这样的提示。出现这样的现象的原因是网站采取了一些反爬虫的措施，比如服务器会检测某个 IP 在单位时间内的请求次数，如果超过了这个阈值，那么会直接拒绝服务，返回一些错误信息，这种情况可以称之为封 IP，于是乎就成功把我爬虫禁掉了。</p>
<p>既然服务器检测的是某个 IP 单位时间的请求次数，那么借助某种方式来伪装的 IP，让服务器识别不出是由本机发起的请求，不就可以成功防止封 IP 了吗？</p>
<p>那么在这里一种有效的方式就是使用代理，使用它可以成功伪装 IP，避免本机 IP 被封禁的情况。</p>
<h5 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h5><p>代理服务器，英文叫做 Proxy Server，它的功能是代理网络用户去取得网络信息。形象地说，它是网络信息的中转站。在正常请求一个网站时，是发送了 Request 给 Web 服务器，Web 服务器把 Response 传回来。如果设置了代理服务器，实际上就是在本机和服务器之间搭建了一个桥，此时本机不是直接向 Web 服务器发起请求，而是向代理服务器发出请求， Request 会发送给代理服务器，然后由代理服务器再发送给 Web 服务器，然后由代理服务器再把 Web 服务器返回的 Response 转发给本机，这样同样可以正常访问网页，但这个过程 Web 服务器识别出的真实的 IP 就不再是本机的 IP 了，就成功实现了 IP 伪装，这就是代理的基本原理。</p>
<h5 id="代理的用途"><a href="#代理的用途" class="headerlink" title="代理的用途"></a>代理的用途</h5><ul>
<li>访问一些单位或团体内部资源</li>
<li>提高访问速度</li>
<li>隐藏真实 IP</li>
<li>突破自身 IP 访问限制，访问一些平时不能访问的站点</li>
</ul>
<h5 id="爬虫代理"><a href="#爬虫代理" class="headerlink" title="爬虫代理"></a>爬虫代理</h5><p>对于爬虫来说，由于爬虫爬取速度过快，在爬取过程中可能遇到同一个 IP 访问过于频繁的问题，网站就会让输入验证码或登录或者直接封锁 IP，这样会给爬取带来极大的不便。</p>
<p>所以使用代理隐藏真实的 IP，让服务器误以为是代理服务器在请求自己。这样在爬取过程中通过不断更换代理，就不会被封锁，可以达到很好的爬取效果。</p>
<h5 id="代理的类别"><a href="#代理的类别" class="headerlink" title="代理的类别"></a>代理的类别</h5><h6 id="类别"><a href="#类别" class="headerlink" title="类别"></a>类别</h6><p>根据代理的协议区分，代理可以分为如下类别：</p>
<ul>
<li><p>FTP 代理服务器，主要用于访问 FTP 服务器，一般有上传、下载以及缓存功能，端口一般为 21、2121 等。</p>
</li>
<li><p>HTTP 代理服务器，主要用于访问网页，一般有内容过滤和缓存功能，端口一般为 80、8080、3128 等。</p>
</li>
<li><p>SSL&#x2F;TLS 代理，主要用于访问加密网站，一般有 SSL 或 TLS 加密功能（最高支持 128 位加密强度），端口一般为 443。</p>
</li>
<li><p>RTSP 代理，主要用于 Realplayer 访问 Real 流媒体服务器，一般有缓存功能，端口一般为 554。</p>
</li>
<li><p>Telnet代理，主要用于 telnet 远程控制（黑客入侵计算机时常用于隐藏身份），端口一般为23。</p>
</li>
<li><p>POP3&#x2F;SMTP 代理，主要用于 POP3&#x2F;SMTP 方式收发邮件，一般有缓存功能，端口一般为 110&#x2F;25。</p>
</li>
<li><p>SOCKS代理，只是单纯传递数据包，不关心具体协议和用法，所以速度快很多，一般有缓存功能，端口一般为1080。SOCKS 代理协议又分为 SOCKS4 和 SOCKS5，SOCKS4 协议只支持 TCP，而 SOCKS5 协议支持 TCP 和 UDP，还支持各种身份验证机制、服务器端域名解析等。简单来说，SOCK4能做到的SOCKS5都可以做到，但SOCKS5能做到的SOCK4不一定能做到。</p>
<h6 id="根据匿名程度区分"><a href="#根据匿名程度区分" class="headerlink" title="根据匿名程度区分"></a>根据匿名程度区分</h6><p>根据代理的匿名程度划分，代理可以分为如下类别：</p>
<ul>
<li>高度匿名代理，高度匿名代理会将数据包原封不动的转发，在服务端看来就好像真的是一个普通客户端在访问，而记录的 IP 是代理服务器的 IP。</li>
<li>普通匿名代理，普通匿名代理会在数据包上做一些改动，服务端上有可能发现这是个代理服务器，也有一定几率追查到客户端的真实 IP。代理服务器通常会加入的 HTTP 头有 HTTP_VIA 和 HTTP_X_FORWARDED_FOR。</li>
<li>透明代理，透明代理不但改动了数据包，还会告诉服务器客户端的真实 IP。这种代理除了能用缓存技术提高浏览速度，能用内容过滤提高安全性之外，并无其他显著作用，最常见的例子是内网中的硬件防火墙。</li>
<li>间谍代理，间谍代理指组织或个人创建的，用于记录用户传输的数据，然后进行研究、监控等目的代理服务器。</li>
</ul>
<h5 id="常见的代理设置"><a href="#常见的代理设置" class="headerlink" title="常见的代理设置"></a>常见的代理设置</h5><ul>
<li>使用网上的免费代理，最好使用高匿代理，使用前抓取下来筛选一下可用代理，也可以进一步维护一个代理池。</li>
<li>使用付费代理服务，互联网上存在许多代理商，可以付费使用，质量比免费代理好很多。</li>
<li>ADSL拨号，拨一次号换一次 IP，稳定性高，也是一种比较有效的解决方案。</li>
</ul>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/31/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/" rel="prev" title="卷积神经网络">
                  <i class="fa fa-chevron-left"></i> 卷积神经网络
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/23/%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0-2/" rel="next" title="爬虫笔记—2">
                  爬虫笔记—2 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">袁叔叔</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>
    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
